{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Äî Zeepy</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞ Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- –ò–∫–æ–Ω–∫–∏ Font Awesome -->
    <script src="https://kit.fontawesome.com/6f3662e234.js" crossorigin="anonymous"></script>
    
    <!-- üî• –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è 3D-—Ñ–æ–Ω–∞ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.fog.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0D1117; /* –ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ */
        }
        
        /* --- üî• –°—Ç–∏–ª–∏ –¥–ª—è 3D-—Ñ–æ–Ω–∞ --- */
        #vanta-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0; /* –§–æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–∑–∞–¥–∏ –≤—Å–µ–≥–æ */
        }

        /* --- üî• –°—Ç–∏–ª–∏ –¥–ª—è "—Å—Ç–µ–∫–ª—è–Ω–Ω–æ–π" –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –±–ª–∏–∫–æ–º --- */
        .register-card {
            /* 1. –≠—Ñ—Ñ–µ–∫—Ç –º–∞—Ç–æ–≤–æ–≥–æ —Å—Ç–µ–∫–ª–∞ */
            background: rgba(22, 27, 34, 0.65); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            
            border: 1px solid rgba(88, 166, 255, 0.2);
            border-radius: 0.75rem; /* 12px */
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            position: relative; /* –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–ª–∏–∫–∞ */
            overflow: hidden; /* –°–∫—Ä—ã–≤–∞–µ–º —á–∞—Å—Ç–∏ –±–ª–∏–∫–∞, –≤—ã—Ö–æ–¥—è—â–∏–µ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã */
            z-index: 1;
        }

        /* 2. –°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –±–ª–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥—É–µ—Ç –∑–∞ –º—ã—à–∫–æ–π */
        .register-card::before {
            content: '';
            position: absolute;
            /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –±–ª–∏–∫ —Å –ø–æ–º–æ—â—å—é CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö JS */
            left: var(--mouse-x);
            top: var(--mouse-y);
            width: 300px;
            height: 300px;
            /* –°–æ–∑–¥–∞–µ–º –º—è–≥–∫–∏–π –∫—Ä—É–≥–æ–≤–æ–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
            background: radial-gradient(circle at center, rgba(47, 129, 247, 0.25), transparent 60%);
            transform: translate(-50%, -50%);
            opacity: 0; /* –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –±–ª–∏–∫ –Ω–µ–≤–∏–¥–∏–º */
            transition: opacity 0.3s ease-in-out;
            pointer-events: none; /* –ë–ª–∏–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω –º–µ—à–∞—Ç—å –∫–ª–∏–∫–∞–º */
        }

        /* 3. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–∏–∫ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É */
        body:hover .register-card::before {
            opacity: 1;
        }

        /* –ú–µ–ª–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ */
        .input-field {
            transition: all 0.2s ease-in-out;
        }
        .input-field:focus {
            box-shadow: 0 0 0 2px rgba(47, 129, 247, 0.5);
        }
    </style>
    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Tailwind
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-dark': '#0D1117',
                        'brand-surface': '#161B22',
                        'brand-border': '#30363D',
                        'brand-primary': '#2F81F7',
                        'brand-primary-hover': '#58A6FF',
                        'brand-secondary': '#8B949E',
                        'brand-text': '#C9D1D9',
                    }
                }
            }
        }
    </script>
</head>
<body class="text-brand-text antialiased">

    <!-- üî• –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è 3D-—Ñ–æ–Ω–∞ -->
    <div id="vanta-bg"></div>

    <div class="relative flex items-center justify-center min-h-screen px-4 py-8 z-10">
        <div class="w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-white">–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤ <span class="text-brand-primary">Zeepy</span></h1>
                <p class="text-brand-secondary mt-2">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∏ –Ω–∞—á–Ω–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥.</p>
            </div>

            <!-- üî• –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å .register-card –∫ –∫–∞—Ä—Ç–æ—á–∫–µ -->
            <div class="register-card p-8">
                <form method="POST">
                    {% csrf_token %}
                    
                    <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö -->
                    {% if messages %}
                        <div class="mb-4">
                            {% for message in messages %}
                            <div class="bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-md text-sm" role="alert">
                                {{ message }}
                            </div>
                            {% endfor %}
                        </div>
                    {% endif %}

                    <div class="space-y-6">
                        <div>
                            <label for="email" class="block text-sm font-medium text-brand-text mb-2">Email</label>
                            <input type="email" name="email" id="email" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email" required class="input-field w-full bg-brand-dark/70 border border-brand-border rounded-md p-3 text-sm text-brand-text focus:outline-none focus:ring-0">
                        </div>
                        <div>
                            <label for="password" class="block text-sm font-medium text-brand-text mb-2">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" name="password1" id="password" placeholder="–°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å" required class="input-field w-full bg-brand-dark/70 border border-brand-border rounded-md p-3 text-sm text-brand-text focus:outline-none focus:ring-0">
                        </div>
                        <div>
                            <label for="password2" class="block text-sm font-medium text-brand-text mb-2">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                            <input type="password" name="password2" id="password2" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required class="input-field w-full bg-brand-dark/70 border border-brand-border rounded-md p-3 text-sm text-brand-text focus:outline-none focus:ring-0">
                        </div>
                         <div>
                            <label for="ref_code" class="block text-sm font-medium text-brand-text mb-2">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                            <input type="text" name="ref_code" id="ref_code" placeholder="–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è" value="{{ referral_code }}" class="input-field w-full bg-brand-dark/70 border border-brand-border rounded-md p-3 text-sm text-brand-text focus:outline-none focus:ring-0">
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <button type="submit" class="w-full bg-brand-primary text-white font-bold py-3 px-4 rounded-md hover:bg-brand-primary-hover transition-colors">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    </div>
                </form>
            </div>
            
            <p class="text-center text-sm text-brand-secondary mt-6">
                –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="{% url 'login' %}" class="font-semibold text-brand-primary-hover hover:underline">–í–æ–π—Ç–∏</a>
            </p>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- üî• –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 3D-—Ñ–æ–Ω–∞ Vanta.js ---
        VANTA.FOG({
            el: "#vanta-bg",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            highlightColor: 0x3c83f9,   // –°–≤–µ—Ç–ª–æ-—Å–∏–Ω–∏–π
            midtoneColor: 0x89299d,   // –ü—É—Ä–ø—É—Ä–Ω—ã–π
            lowlightColor: 0x1f4a94,    // –ì–ª—É–±–æ–∫–∏–π —Å–∏–Ω–∏–π
            baseColor: 0xd1117,      // –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–º–Ω—ã–π —Ü–≤–µ—Ç
            blurFactor: 0.60,
            speed: 1.20,
            zoom: 0.80
        });

        // --- üî• –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º—ã—à–∏ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –±–ª–∏–∫–∞ ---
        const registerCard = document.querySelector('.register-card');
        
        window.addEventListener('mousemove', (e) => {
            const rect = registerCard.getBoundingClientRect();
            // –í—ã—á–∏—Å–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –º—ã—à–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–∞—Ä—Ç–æ—á–∫–∏
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
            registerCard.style.setProperty('--mouse-x', `${x}px`);
            registerCard.style.setProperty('--mouse-y', `${y}px`);
        });
    });
    </script>

</body>
</html>
